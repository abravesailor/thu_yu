{"version":3,"sources":["webpack:///./src/views/login.vue?b376","webpack:///./src/views/login.vue","webpack:///src/views/login.vue"],"names":["views_login","render","_vm","this","_h","$createElement","_c","_self","_m","_v","ref","staticClass","attrs","model","account","rules","label-position","label-width","prop","type","auto-complete","placeholder","value","callback","$$v","$set","expression","autofocus","pwdFocus","href","title","to","path","staticStyle","width","disabled","allowLogin","loading","nativeOn","click","$event","preventDefault","handleLogin","staticRenderFns","src","__webpack_require__","height","__vue_styles__","ssrContext","Component","normalizeComponent","login","__webpack_exports__","data","_this2","username","pwd","required","validator","Error","validateCorrect","trigger","checked","created","reg_user","JSON","parse","window","sessionStorage","getItem","methods","console","log","_this","password","success","length","$","ajax","url","contentType","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","login_name","login_password","dataType","status","ses","setItem","permission","$router","push","seen","$notify","message","failed_reason","error","trim"],"mappings":"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","file":"static/js/0.d86b7e80d6366e52dfcc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('el-form',{ref:\"AccountForm\",staticClass:\"demo-ruleForm login-container\",attrs:{\"model\":_vm.account,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":\"0px\"}},[_c('h3',{staticClass:\"title\"},[_vm._v(\"欢迎登录\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"auto-complete\":\"off\",\"placeholder\":\"请输入账号\"},model:{value:(_vm.account.username),callback:function ($$v) {_vm.$set(_vm.account, \"username\", $$v)},expression:\"account.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"pwd\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autofocus\":_vm.pwdFocus,\"auto-complete\":\"off\",\"placeholder\":\"请输入登录密码\"},model:{value:(_vm.account.pwd),callback:function ($$v) {_vm.$set(_vm.account, \"pwd\", $$v)},expression:\"account.pwd\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"extra-text\"},[_c('a',{staticClass:\"forget-pwd\",attrs:{\"href\":\"javascript:;\",\"title\":\"找回密码\"}},[_vm._v(\"忘记密码?\")]),_vm._v(\" \"),_c('router-link',{staticClass:\"reg-text\",attrs:{\"to\":{path: '/register'},\"title\":\"立即注册\"}},[_vm._v(\"立即注册\")])],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"100%\"}},[_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"primary\",\"disabled\":_vm.allowLogin,\"loading\":_vm.loading},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleLogin($event)}}},[_vm._v(\"登录\")])],1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header-content\"},[_c('div',{staticClass:\"logo-part\"},[_c('img',{attrs:{\"src\":require(\"../assets/logo.png\"),\"width\":\"30\",\"height\":\"30\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"小组讨论系统\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-12374cb6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-12374cb6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-12374cb6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-12374cb6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/login.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <div class=\"header-content\">\n      <div class=\"logo-part\">\n        <img src=\"../assets/logo.png\" width=\"30\" height=\"30\">\n        <span>小组讨论系统</span>\n      </div>\n    </div>\n    <el-form ref=\"AccountForm\" :model=\"account\" :rules=\"rules\" label-position=\"left\" label-width=\"0px\"\n             class=\"demo-ruleForm login-container\">\n      <h3 class=\"title\">欢迎登录</h3>\n      <el-form-item prop=\"username\">\n        <el-input type=\"text\" v-model=\"account.username\" auto-complete=\"off\" placeholder=\"请输入账号\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"pwd\">\n        <el-input type=\"password\" v-model=\"account.pwd\" :autofocus=\"pwdFocus\" auto-complete=\"off\" placeholder=\"请输入登录密码\"></el-input>\n      </el-form-item>\n      <!--<el-checkbox v-model=\"checked\" checked class=\"remember\">记住密码</el-checkbox>-->\n      <el-form-item class=\"extra-text\">\n        <a href=\"javascript:;\" class=\"forget-pwd\" title=\"找回密码\">忘记密码?</a>\n        <router-link :to=\"{path: '/register'}\" class=\"reg-text\" title=\"立即注册\">立即注册</router-link>\n      </el-form-item>\n      <el-form-item style=\"width:100%;\">\n        <el-button type=\"primary\" style=\"width:100%;\" @click.native.prevent=\"handleLogin\" :disabled=\"allowLogin\" :loading=\"loading\">登录</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\n  //import API from '../api/api_user'\n  export default {\n    data() {\n      var validateAccount = (rules, value, callback) => {\n        if (value === '') {\n          callback(new Error('请输入账号'));\n        } else {\n          if (this.account.username !== '') {\n            this.account.username = value;\n\t\t\tthis.validateCorrect();\n          }\n          callback();\n        }\n      };\n\t  var validatePwd = (rules, value, callback) => {\n        if (value === '') {\n          callback(new Error('请输入密码'));\n        } else {\n          if (this.account.pwd !== '') {\n            this.account.pwd = value;\n            this.validateCorrect();\n          }\n          callback();\n        }\n      };\n      return {\n        loading: false,\n        account: {\n          username: '',\n          pwd: ''\n        },\n        rules: {\n          username: [\n            { required: true, validator: validateAccount, trigger: 'change' }\n\n          ],\n          pwd: [\n            {required: true, validator: validatePwd, trigger: 'change'}\n          ]\n        },\n        pwdFocus: false,\n\t\tallowLogin: true,\n        checked: true\n      };\n    },\n    created() {\n      let reg_user = JSON.parse(window.sessionStorage.getItem('register-user'));\n      if (reg_user) {\n        this.account.username = reg_user.username;\n        this.account.pwd = '';\n        this.pwdFocus = true;\n      }\n    },\n    methods: {\n      handleLogin(){\n        let that = this;\n        let result = {\n          id: '1',\n          username: 'admin',\n          nickname: this.account.username,\n          name: 'administrator',\n          email: '888888@163.com'\n        };\n        console.log(this.account.username);\n\n\n\n      var _this = this\n      var username = this.account.username;\n      var password = this.account.pwd;\n      var success = true\n      // 判断用户名合法性\n      if (!(username.length >= 4 && username.length <= 8)) {\n        success = false\n      }\n      // 判断密码合法性\n      if (!(password.length >= 1 && password.length <= 16)) {\n        success = false\n      }\n      \n      function GetJsonData () {\n        var json = {\n          'login_name': username,\n          'login_password': password\n        }\n        return json\n      }\n      var isdebug = false;\n      if (isdebug)\n      {\n        var ses = window.sessionStorage\n        ses.setItem('login', username)\n        ses.setItem('password', password)\n        //ses.setItem('auth', data.permission)\n        if (window.sessionStorage.login === username) {\n          _this.$router.push('/classes')\n        }\n      }\n      else\n      {\n      if (success === true) {\n        $.ajax({\n          type: 'post',\n          url: '/api/login_ajax',\n          contentType: 'application/json; charset=utf-8',\n          data: JSON.stringify(GetJsonData()),\n          dataType: 'json',\n          success: function (data) {\n            if (data.status === 'success') {\n              console.log(username)\n              var ses = window.sessionStorage\n              ses.setItem('login', username)\n              ses.setItem('password', password)\n              ses.setItem('auth', data.permission)\n              if (window.sessionStorage.login === username) {\n                _this.$router.push('/classes')\n              }\n            } else {\n              _this.seen = 'loginfail';\n              _this.$notify({\n              title: '提示',\n              message: data.failed_reason\n            })\n            }\n          },\n          error: function (data) {\n            _this.seen = 'loginfail';\n            _this.$notify({\n              title: '提示',\n              message: '网络链接失败！'\n            })\n          }\n        })\n        \n      } else {\n        _this.seen = 'loginfail'\n      }\n      }\n      },\n      validateCorrect(){\n        if(this.account.pwd.trim().length > 0 && this.account.username.trim().length > 0){\n          this.allowLogin = false;\n        } else {\n          this.allowLogin = true;\n        }\n      }\n    }\n  }\n</script>\n<style scoped>\n  body {\n    background: #DFE9FB;\n  }\n  .header-content {\n    position: fixed;\n    top: 0;\n    width: 100%;\n    height: 50px;\n    padding: 6px 0;\n    border-bottom: 1px solid #ddd;\n    box-shadow: 0 0 2px #ddd;\n  }\n  .header-content .logo-part {\n    margin-left: 10px;\n    font-size: 18px;\n    color: #999;\n  }\n  .header-content .logo-part img {\n    vertical-align: middle;\n  }\n  .login-container {\n    /*box-shadow: 0 0px 8px 0 rgba(0, 0, 0, 0.06), 0 1px 0px 0 rgba(0, 0, 0, 0.02);*/\n    -webkit-border-radius: 5px;\n    border-radius: 5px;\n    -moz-border-radius: 5px;\n    background-clip: padding-box;\n    margin: 160px auto;\n    width: 350px;\n    padding: 35px 35px 15px 35px;\n    background: #fff;\n    border: 1px solid #eaeaea;\n    box-shadow: 0 0 25px #cac6c6;\n\n    background: -ms-linear-gradient(top, #ace, #00C1DE); /* IE 10 */\n    background: -moz-linear-gradient(top, #ace, #00C1DE); /*火狐*/\n    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#ace), to(#00C1DE)); /*谷歌*/\n    background: -webkit-linear-gradient(top, #ace, #00C1DE); /*Safari5.1 Chrome 10+*/\n    background: -o-linear-gradient(top,#ace, #00C1DE); /*Opera 11.10+*/\n\n  }\n  .login-container .title {\n    margin: 0px auto 40px auto;\n    text-align: center;\n    color: #505458;\n  }\n  .login-container .remember {\n    margin: 0px 0px 35px 0px;\n  }\n  .extra-text {\n    position: relative;\n    margin-bottom: 0;\n    padding-left: 2px;\n  }\n  .extra-text a {\n    font-size: 12px;\n    color: #aaa;\n  }\n  .extra-text a:hover {\n    color: #29e;\n  }\n  .extra-text .reg-text {\n    position: absolute;\n    top: 4px;\n    right: 2px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/login.vue"],"sourceRoot":""}